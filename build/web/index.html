<!--<%-- 
    Document   : register
    Author     : hp
--%>

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ page import="java.net.URLDecoder" %>


<!DOCTYPE html>
<html>
<head>

    <title>Property Listings</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <link rel="stylesheet" type="text/css" href="css/property_listing_result.css">

</head>

    
    

<body>

    <table border="1"  >   
        
                    <h1>Property Listings</h1>


        <tr >

             <th>ID</th>
             <th>City</th>
             <th>Location</th>
             <th>Price</th>
             <th>Bedrooms</th>  Add a header for the Bedrooms property 
             <th>Bathrooms</th>  Add a header for the Bathrooms property 
             <th>Property Type</th>  Add a header for the Property Type property 
             <th>Extra Facilities</th>  Add a header for the Extra Facilities property 
             <th>Transport Modes</th>  Add a header for the Transport Modes property 
             <th>Furniture</th>  Add a header for the Furniture property 
             <th>Image Path</th>
             <th>Payment Mode</th>  Add a header for the Payment Mode property 
             <th>Contact Details</th>
             <th>Transaction Type</th> Add a header for the Contact Details property 
             Add headers for other properties as needed 
        </tr>
        <c:forEach items="${propertyListings}" var="property">
            <tr>
               <td>${property.propertyId}</td>
                <td>${property.city}</td>
                <td>${property.location}</td>
                <td>${property.price}</td>
                <td>${property.bedrooms}</td>  Add a cell for the Bedrooms property 
                <td>${property.bathrooms}</td>  Add a cell for the Bathrooms property 
                <td>${property.propertyType}</td>  Add a cell for the Property Type property 
                <td>${property.extraFacilities}</td>  Add a cell for the Extra Facilities property 
                <td>${property.transportModes}</td>  Add a cell for the Transport Modes property 
                <td>${property.furniture}</td>  Add a cell for the Furniture property 
  
     
                <td>
                    <a href="images.jsp?imagePaths=${property.imagePaths}">
                    <button  type="submit" >View images</button>
                    </a>
                </td>

       
  











                 Add a cell for the Image Path property 
                <td>${property.paymentMode}</td>  Add a cell for the Payment Mode property 
                <td>${property.contactDetails}</td>  Add a cell for the Contact Details property 
                <td>
                        
                        
         Insert Button 
         <form action="PropertyListingsServlet" method="post" enctype="multipart/form-data">
            <input type="hidden" name="action" value="insert">
            <input type="hidden" name="propertyId" value="$}">
            <button type="submit">Insert</button>
        </form>
 

         Update Button 
        <form  action="update_property.jsp"  method="get" enctype="multipart/form-data">

            <input type="hidden"  name="propertyId" value="${property.propertyId}">
            <input type="hidden"  name="city" value="${property.city}">
            <input type="hidden" name="location" value="${property.location}">
              <input type="hidden" name="price" value="${property.price}"><br>
              <input type="hidden" name="bedrooms" value="${property.bedrooms}">
               <input type="hidden" name="bathrooms" value="${property.bathrooms}">
                       <input type="hidden" name="propertyType" value="${property.propertyType}">

               <input type="hidden" name="extraFacilities" value="${property.extraFacilities}">
               
       

<select name="transportModes" required>
    <option value="Residential Land" <%= "Residential Land".equals(request.getParameter("transportModes")) ? "selected" : "" %>>Residential Land</option>
    <option value="Commercial" <%= "Commercial".equals(request.getParameter("transportModes")) ? "selected" : "" %>>Commercial</option>
    <option value="Condominium" <%= "Condominium".equals(request.getParameter("transportModes")) ? "selected" : "" %>>Condominium</option>
    <option value="Townhouse" <%= "Townhouse".equals(request.getParameter("transportModes")) ? "selected" : "" %>>Townhouse</option>
    <option value="Multi-unit dwelling" <%= "Multi-unit dwelling".equals(request.getParameter("transportModes")) ? "selected" : "" %>>Multi-unit dwelling</option>
</select><br>

        
           <input type="hidden" name="furniture" value="${property.furniture}">
           
             <input type="hidden" name="image">
             
             <input type="hidden" name="paymentMode" value="${property.paymentMode}">
             
             
             
                <input type="hidden" name="contactDetails" value="${property.contactDetails}">
            <button type="submit">Update</button>
            
        </form>
         Delete Button 
   <form id="deleteForm" action="PropertyListingsServlet" method="get" enctype="multipart/form-data" onsubmit="return confirmDelete()">
    <input type="hidden" name="action" value="delete">
    <input type="hidden" name="propertyId" value="${property.propertyId}">
    
           <button type="submit">Delete</button>
              </form>

    </td>
                 Add cells for other properties as needed 
                
            </tr>
            
            
        </c:forEach>
            <c:if test="${empty propertyListings}">
    <p>No property listings found.</p>
</c:if>
    
    

</table>
    
    
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>





<%
    String message = (String) request.getSession().getAttribute("message");
    if (message != null) {
%>
    <script>
        Swal.fire({
            title: 'Success',
            text: '<%= message %>',
            icon: 'success'
        });
    </script>
    <%-- Remove the success message from the session --%>
    <% request.getSession().removeAttribute("message"); %>
<%
    }
%>


<script>
    function confirmDelete() {
        Swal.fire({
            title: 'Are you sure?',
            text: 'Delete this property listing.',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                // Submit the "Delete" form
                document.getElementById('deleteForm').submit();
            }
        });

        // Prevent the form from submitting immediately
        return false;
    }
</script>







</body>
</html>
-->
